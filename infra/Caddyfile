(familyone_app) {
    encode gzip

    @legacy path /health /register_face /recognize_face /delete_face/* /list_faces /clear_all /generate_pdf /download_pdf/*

    handle_path /api/* {
        reverse_proxy 127.0.0.1:5000
    }

    handle @legacy {
        reverse_proxy 127.0.0.1:5000
    }

    handle {
        root * dist
        try_files {path} /index.html
        file_server
    }
}

:8080 {
    import familyone_app
}

totalcode.online, www.totalcode.online {
    import familyone_app
}
